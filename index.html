
<!-- saved from url=(0040)https://skangogames.com/GoalNewPlugin25/ -->
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <script type="text/javascript" src="./Native/unity-webgl-tools.js"></script>
    <script type="text/javascript" src="./Native/microphone.js"></script>
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Goal</title>
    <script src="./polyfills.js"></script>
    <link rel="shortcut icon" href="https://skangogames.com/GoalNewPlugin25/TemplateData/favicon.ico">
    <style>
        html {
            box-sizing: border-box;
        }

        *,
        *:before,
        *:after {
            box-sizing: inherit;
        }

        html,
        body {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
        }

        canvas {
            display: block;
        }

        body {
            margin: 0;
        }

        #unity-container {
            width: 100%;
            height: 100%;
        }

        #unity-canvas {
            width: 100%;
            height: 100%;

            background: #231F20;
        }

        #loading-cover {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #unity-loading-bar {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #unity-progress-bar-empty {
            width: 80%;
            height: 24px;
            margin: 10px 20px 20px 10px;
            text-align: left;
            border: 1px solid white;
            padding: 2px;
        }

        #unity-progress-bar-full {
            width: 0%;
            height: 100%;
            background: white;
        }

        .light #unity-progress-bar-empty {
            border-color: black;
        }

        .light #unity-progress-bar-full {
            background: black;
        }

        .spinner,
        .spinner:after {
            border-radius: 50%;
            width: 5em;
            height: 5em;
        }

        .spinner {
            margin: 10px;
            font-size: 10px;
            position: relative;
            text-indent: -9999em;
            border-top: 1.1em solid rgba(255, 255, 255, 0.2);
            border-right: 1.1em solid rgba(255, 255, 255, 0.2);
            border-bottom: 1.1em solid rgba(255, 255, 255, 0.2);
            border-left: 1.1em solid #ffffff;
            transform: translateZ(0);
            animation: spinner-spin 1.1s infinite linear;
        }

        @keyframes spinner-spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class="dark" data-new-gr-c-s-check-loaded="14.1068.0" data-gr-ext-installed="">
    <div id="unity-container" class="unity-desktop">
        <canvas id="unity-canvas"></canvas>
    </div>
    <div id="loading-cover" style="">
        <div id="unity-loading-bar">
            <div id="unity-progress-bar-empty" style="">
                <div id="unity-progress-bar-full" style="width: 90%;"></div>
            </div>
            <div class="spinner" style="display: none;"></div>
        </div>
    </div>
    <script src="./Build/goal_build_38.loader.js"></script>
    <script type="text/javascript" src="https://libs.zappar.com/zappar-cv/0.3.12/zappar-cv.js"></script>
    <script>

       /* function getLocalStream() {
            console.log("Permission Request");
    navigator.mediaDevices.getUserMedia({video: false, audio: true}).then( stream => {
        window.localStream = stream; // A
        window.localAudio.srcObject = stream; // B
        window.localAudio.autoplay = true; // C
    }).catch( err => {
        console.log("u got an error:" + err)
    });
}*/

        var db = indexedDB.open("dummy_indexdb", 1); // iOS 14.6 fix; the call to open indexdb hangs forever otherwise
        
        var GoalWeb = null;  //Unity WebGl reference;
        const buildUrl = "Build";
        const loaderUrl = buildUrl + "/goal_build_38.loader.js";
        const config = {
            dataUrl: buildUrl + "/goal_build_38.data",
            frameworkUrl: buildUrl + "/goal_build_38.framework.js",
            codeUrl: buildUrl + "/goal_build_38.wasm",
        streamingAssetsUrl: "StreamingAssets",
            companyName: "Reflect",
            productName: "Goal",
            productVersion: "1.0",
        };

        const container = document.querySelector("#unity-container");
        const canvas = document.querySelector("#unity-canvas");
        const loadingCover = document.querySelector("#loading-cover");
        const progressBarEmpty = document.querySelector("#unity-progress-bar-empty");
        const progressBarFull = document.querySelector("#unity-progress-bar-full");
        const spinner = document.querySelector('.spinner');

        if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
            container.className = "unity-mobile";
            //config.matchWebGLToCanvasSize = false;    
            //set devicePixelRatio=1; to avoid draining fillrate performance on mobile and override low DPI mode
            config.devicePixelRatio = window.devicePixelRatio;
        }
        loadingCover.style.display = "";

        window.zappar = ZCV.initialize();

        const script = document.createElement("script");
        script.src = loaderUrl;
        //script.onload = () => { CreateUnityLoader();   };
        document.body.appendChild(script);

        window.zappar.permission_request_ui_promise().then(WaitForZCVLoad);

        function WaitForZCVLoad() {
            if (zappar.loaded()) {
                // loadingCover.style.display = "none"; 
                CreateUnityLoader();
                return;
            }
            setTimeout(WaitForZCVLoad, 500);
        }

        function CreateUnityLoader() {
            createUnityInstance(canvas, config, (progress) => {
                spinner.style.display = "none";
                progressBarEmpty.style.display = "";
                progressBarFull.style.width = `${100 * progress}%`;
            }).then((instance) => {
                unityInstance = instance;
                GoalWeb = instance;
                loadingCover.style.display = "none";
                // WaitForZCVLoad();
            }).catch((message) => {
                alert("your browser is not supported! Please use chrome for the best experiance" + message);
            });
        }
        getLocalStream();
    </script><script src="./Build/goal_build_38.loader.js"></script>
    
    // SkangoGames LLC microphone plugin made in JS
    <script>
    navigator.mediaDevices.getUserMedia({
audio: true,
video: false
})
.then(function(stream) {
const audioContext = new AudioContext();
const analyser = audioContext.createAnalyser();
const microphone = audioContext.createMediaStreamSource(stream);
const scriptProcessor = audioContext.createScriptProcessor(2048, 1, 1);

analyser.smoothingTimeConstant = 0.8;
analyser.fftSize = 1024;

microphone.connect(analyser);
analyser.connect(scriptProcessor);
scriptProcessor.connect(audioContext.destination);
scriptProcessor.onaudioprocess = function() {
  const array = new Uint8Array(analyser.frequencyBinCount);
  analyser.getByteFrequencyData(array);
  const arraySum = array.reduce((a, value) => a + value, 0);
  const average = arraySum / array.length;
  var Value = average;
  console.log(Math.round(average));
  if (GoalWeb != null) {
    GoalWeb.SendMessage('AudioManager','UpdateVolumeRate',Value);
  }
   //colorPids(average);
};
})
.catch(function(err) {
/* handle the error */
console.error(err);
alert(err);
});

function colorPids(vol) {
const allPids = [...document.querySelectorAll('.pid')];
const numberOfPidsToColor = Math.round(vol / 10);
const pidsToColor = allPids.slice(0, numberOfPidsToColor);
for (const pid of allPids) {
pid.style.backgroundColor = "#e6e7e8";
}
for (const pid of pidsToColor) {
// console.log(pid[i]);
pid.style.backgroundColor = "#69ce2b";
}
}
</script>








<!-- <!DOCTYPE html>
<html lang="en-us">
  <head>
    <script type="text/javascript" src="./Native/unity-webgl-tools.js"></script>
    <script type="text/javascript" src="./Native/microphone.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Goal</title>
    <script src="./polyfills.js"></script>
  </head>
  <body style="text-align: center">
    <canvas id="unity-canvas" style="width: 720px; height: 1280px; background: #231F20"></canvas>
    <script src="Build/Build.loader.js"></script>
    <script>
      createUnityInstance(document.querySelector("#unity-canvas"), {
        dataUrl: "Build/Build.data",
        frameworkUrl: "Build/Build.framework.js",
        codeUrl: "Build/Build.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "Reflect",
        productName: "Goal",
        productVersion: "1.0",
      })
      .then((instance) =>
      {
        unityInstance = instance;
      })
      .catch((message) => { console.warn(message); });
    </script>
  </body>
</html> -->
<script src="./Build/goal_build_38.framework.js"></script></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>